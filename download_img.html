<!doctype html>
<html lang="en" xmlns="">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<title>飞瘾犯了-裁剪图片</title>
</head>

<link href="css/bootstrap.min.css?v=202404020006" rel="stylesheet" type="text/css">
<link href="css/font-awesome.css?v=4.4.0" rel="stylesheet">

<link href="css/plugins/chosen/chosen.css" rel="stylesheet">
<link href="css/style.css?v=4.1.0" rel="stylesheet">
<link href="css/fly.css?v=4.1.0" rel="stylesheet">

<body class="gray-bg">
<div class="wrapper wrapper-content animated fadeInRight">
	<div class="row">
		<div class="col-sm-6">
			<div class="ibox float-e-margins">
				<div class="ibox-title">
					<h5>裁剪图片</h5>
					<div class="ibox-tools">
						<a class="collapse-link">
							<i class="fa fa-chevron-up"></i>
						</a>
					</div>
				</div>

				<div class="ibox-content">
					<div class="row">
						<div class="form-group col-sm-6">
							<select data-placeholder="请选择时装..." class="chosen-select col-xs-12" value="25" sel_img onchange="change_img()">
								<option value="">请选择时装</option>
							</select>
						</div>
					</div>

					<div class="row" download_img >
					</div>
				</div>
			</div>

			<div class="ibox float-e-margins"></div>
		</div>

	</div>
</div>
<div  hide_div>
</div>

<!-- 全局js -->
<script src="js/jquery.min.js?v=202404111603"></script>
<script src="js/bootstrap.min.js?v=3.3.6"></script>
<script src="js/base.js?v=202404111603"></script>

<!-- Chosen -->
<script src="js/plugins/chosen/chosen.jquery.js"></script>

<!-- 自定义js -->
<script src="js/content.js?v=1.0.0"></script>
<!-- jQuery UI -->
<script src="js/plugins/jquery-ui/jquery-ui.min.js"></script>

<script>
	$(document).ready(function() {
		//页面元素可移动
		WinMove();

		// 当页面加载完成后，给 body 元素添加自定义光标样式
		$('body').addClass('custom-cursor');

		for(let i=0 ; i < show_all_data.length ; i++) {
			const show_data = show_all_data[i];
			$("[hide_div]").append(`<h2>${show_data.cns_name}</h2>`);
			for(let j=0 ; j < show_data.list.length ; j++) {
				const show_data_now = show_data.list[j];
				$("[hide_div]").append(`
					<img show_img alt="${show_data.cns_name}" src="img/show/${show_data.file_name}(F)/${show_data_now.url}/1.png">
					<img show_img alt="${show_data.cns_name}" src="img/show/${show_data.file_name}(M)/${show_data_now.url}/1.png">
				`);
			}
			$("[hide_div]").append(`<br>`);
		}

		for(let i = 1 ; i <= show_all_data.length ; i++){
			$("[sel_img]").append(`<option ${i===1 ?'selected':''} value="${i}" hassubinfo="true">${show_all_data[i].en_name}&nbsp;${show_all_data[i].cns_name}</option>`);
		}
	});

	function change_img() {

		const index = $("[sdel_img]").val;


	}
	function change_img2(){
		// 创建一个新的容器元素，并设置其宽度和高度
		const container =  $('<div>').attr({
			position: 'relative',
			overflow: 'hidden',// 确保图片不会超出容器
			download: 'downloaded_image.png'
		}).appendTo('[download_img]').append($("#myElement"));

		// 使用 html2canvas 捕获容器元素的截图
		html2canvas(container[0], {
			scale: 1, // 如果你想提高截图的质量，可以增加 scale
			width:120,
			height:200
		}).then(canvas => {
			// 创建一个下载链接
			$('<a>').attr({
				href: canvas.toDataURL('image/png'),
				download: 'downloaded_image.png'
			}).html("下载图片").appendTo('[download_img]');
		}).catch(error => {
			console.error('捕获元素截图失败：', error);
		});

	}
</script>

</body>
</html>